{"version":3,"sources":["services/persons.js","components/Person.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","components/Footer.js","components/Header.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","put","concat","delete","Person","props","react_default","a","createElement","className","name","number","onClick","value","Persons","persons","allPersons","map","person","components_Person","key","Filter","onChange","onKeyUp","PersonForm","onSubmit","valueName","onChangeName","valueNumber","onChangeNumber","type","Notification","_ref","message","Footer","style","color","fontStyle","fontSize","background","height","textAlign","marginTop","Header","paddingLeft","paddingBottom","phonebookTmp","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setNewFilter","_useState9","_useState10","notificationMessage","setNotificationMessage","_useState11","_useState12","notificationType","setNotificationType","useEffect","console","log","personService","initialPersons","filterNames","array","letter","filter","toLowerCase","startsWith","setUserNotifications","setTimeout","newPersonsArr","p","components_Header","components_Notification","components_Filter","event","target","filteredArray","components_PersonForm","preventDefault","isInArray","length","personObject","returnedPerson","push","window","confirm","catch","error","components_Persons","parseInt","find","res","newPersonsArray","components_Footer","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.505818ba.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\nconst update = (id, newObject) => {\n    return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default {getAll, create, update, remove}","import React from 'react'\n\nconst Person = (props) => {\n\n    return (\n      <div>\n        <p className='person'>{props.name} {props.number} <button onClick={props.onClick} value={props.id}>delete</button></p>\n        \n      </div>\n    )\n  }\n\n  export default Person;  ","import React from 'react'\nimport Person from './Person'\n\nconst rows = (persons, onClick) => persons.map(person =>\n    <Person\n      key={person.id}\n      id= {person.id}\n      name={person.name}\n      number={person.number}\n      onClick = {onClick}\n    />\n  )\n\n\nconst Persons = (props) => {\n    return (\n      <div>\n        {rows(props.allPersons, props.onClick)}\n      </div>\n    )\n  }\n\n  export default Persons;  ","import React from 'react'\n\nconst Filter = (props) => {\n\n    return (\n      <div>\n        <p>filter shown with: <input value={props.value}\n                                    onChange={props.onChange}\n                                    onKeyUp={props.onKeyUp}\n                              /> \n        </p>\n      </div>\n    )\n  }\n\n  export default Filter;  ","import React from 'react'\n\nconst PersonForm = (props) => {\n\n    return (\n      <div>\n        <form onSubmit={props.onSubmit}>\n            <div>\n            name: <input value={props.valueName}\n                        onChange={props.onChangeName}\n                    />\n            </div>\n            <div>\n            number: <input value={props.valueNumber}\n                           onChange={props.onChangeNumber}\n                    />\n            </div>\n            <div>\n            <button type=\"submit\">add</button>\n            </div>\n        </form>\n      </div>\n    )\n  }\n\n  export default PersonForm;  ","import React from 'react'\n\nconst Notification = ({ type, message }) => {\n    if (message === null) {\n      return null\n    }\n    if (type === 'error' ){\n        return (\n            <div className=\"error\">\n                {message}\n            </div>\n        )\n    } else {\n        return (\n            <div className=\"success\">\n                {message}\n            </div>\n            )\n    }\n  }\n\nexport default Notification","import React from 'react'\n\nconst Footer = () => {\n    const footerStyle = {\n      color: 'white',\n      fontStyle: 'italic',\n      fontSize: 16,\n      background: 'teal', \n      height: 100, \n      textAlign: 'center',\n      marginTop: 50\n    }\n  \n    return (\n      <div style={footerStyle}>\n        <br />\n        <em>Phonebook app by <strong>Code for My Life</strong></em>\n      </div>\n    )\n  }\n\n  export default Footer","import React from 'react'\n\nconst Header = () => {\n    const headerStyle = {\n      color: 'white',\n      fontStyle: 'italic',\n      fontSize: 16,\n      background: 'teal', \n      height: 50,  \n      paddingLeft: 10,\n      paddingBottom: 30,\n      textAlign: 'center'\n    }\n  \n    return (\n      <div style={headerStyle}>\n        <br/>\n        <p>Phonebook App by <strong>Code for My Life</strong> - built with MERN stack</p>\n      </div>\n    )\n  }\n\n  export default Header","import personService from './services/persons'\nimport React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\nimport Footer from './components/Footer'\nimport Header from './components/Header'\n\nlet phonebookTmp = []\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ notificationMessage, setNotificationMessage] = useState(null)\n  const [ notificationType, setNotificationType] = useState('')\n\n\n  const hook = () => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n        phonebookTmp = initialPersons\n      })\n  }\n  \n  useEffect(hook, [])\n  \n  // show persons - getAll\n  const showPersons = () => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(persons => setPersons(persons))\n  }\n\n// add person - CREATE and UPDATE person\n  const addPerson = event => {\n    event.preventDefault()\n    const isInArray = persons.filter(person => person.name === newName);\n    console.log('isInArray', isInArray.length)\n    console.log(\"isInArray:::\", isInArray)\n    \n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if ( isInArray.length === 0 ) {\n      \n      console.log('button clicked', event.target)\n      personService\n        .create(personObject)\n        .then(returnedPerson =>{\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          phonebookTmp.push(returnedPerson)\n          console.log('debug phonebooktmp', phonebookTmp)\n          setUserNotifications('success', `Added ${personObject.name} to the phonebook`, null)\n        })\n\n\n    } else if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n      const id = isInArray[0].id\n      console.log(\"id\", id)\n      \n      personService\n        .update(id, personObject)\n        .then(response => {\n          setPersons(persons.map(person => person.id !== id ? person : response.data))\n          setUserNotifications('success',`Updated ${personObject.name} to the phonebook`, null)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          setUserNotifications(\n            'error',\n            `Updating of ${personObject.name} caused an error: '${error.message}'`, \n             null\n          )\n          setNewName('')\n          setNewNumber('')\n        })\n      \n    } else {\n      setNewName('')\n      setNewNumber('')\n    }\n     \n  }\n  // REMOVE person\n  const removePerson = event => {\n    console.log(\"in removePersons\")\n    const id = parseInt(event.target.value)\n    const person = persons.find(p => p.id === id)\n    console.log(\"remove id\", id, \"removed: \", person.name)\n\n    if (window.confirm(`Do you really want to delete '${person.name}'?`)) { \n      personService\n        .remove(id)\n        .then(res =>{\n          console.log(\"returnedPersons\", res)\n          const newPersonsArray = persons.filter(p => p.id !== id)\n          setPersons(newPersonsArray)\n          phonebookTmp = newPersonsArray\n          console.log(\"phonebook tmp\", phonebookTmp)\n          console.log(\"persons\", persons)          \n          setUserNotifications('success',`Removed ${person.name} from the phonebook`, null)\n        })\n        .catch(error => {\n          setUserNotifications(\n            'error', \n            `the person '${person.name}' cannot be deleted from the server! ERROR:: ${error}`, \n            null\n          )\n\n        })\n\n      } \n  }\n \n  // event handlers\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n    console.log(event.target.value)\n\n    if ( event.target.value === '' ){\n      showPersons()\n    } else {\n      let filteredArray = filterNames( phonebookTmp, event.target.value)\n      console.log('debug filtered', filteredArray)\n      setPersons(filteredArray)\n    }\n   \n  }\n  const handleOnKeyUp = (event) => {\n    console.log(\"press button\", event.key)\n    \n   if ( event.key === 'Backspace'){\n      let filteredArray = filterNames( phonebookTmp, event.target.value)\n      console.log('debug onkeyup', filteredArray)\n      setPersons(filteredArray)\n    }  \n  }\n\n  // helper functions\n  const filterNames = (array, letter) => {\n    return array.filter(person => person.name.toLowerCase().startsWith(letter.toLowerCase()) === true )\n  }\n\n  const setUserNotifications = (type, message, id) => {\n    setNotificationType(type)\n    setNotificationMessage(message)\n    setTimeout(()=> {\n      setNotificationMessage(null)\n    }, 4000)\n    if( type === 'error' && id != null){\n      const newPersonsArr = persons.filter (p => p.id !== id)\n      setPersons(newPersonsArr)\n      phonebookTmp = newPersonsArr\n    }\n  }\n\n \n\n  return (\n    <div>\n      <Header />\n      <div className='container'>\n        <h2>Phonebook</h2>\n\n        <Notification type={notificationType} message = {notificationMessage} />\n\n        <Filter value={newFilter}\n                onChange={handleFilterChange}\n                onKeyUp={handleOnKeyUp}\n        />\n\n        <h3>Add a new or update existing one</h3>\n        <PersonForm onSubmit={addPerson}\n                    valueName={newName}\n                    onChangeName={handleNameChange}\n                    valueNumber={newNumber}\n                    onChangeNumber={handleNumberChange}\n        />\n        <h3>Numbers</h3>\n        <Persons allPersons = {persons} onClick={removePerson} />\n      </div>\n      <Footer />\n    </div>\n  )\n\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}