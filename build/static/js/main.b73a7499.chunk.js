(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),l=t(13),r=t.n(l),c=(t(20),t(2)),u=t(3),i=t.n(u),s="/api/persons",m=function(){return i.a.get(s).then(function(e){return e.data})},d=function(e){return i.a.post(s,e).then(function(e){return e.data})},f=function(e,n){return i.a.put("".concat(s,"/").concat(e),n)},g=function(e){return i.a.delete("".concat(s,"/").concat(e)).then(function(e){return e.data})},p=function(e){return console.log("Person component id: ",e.id),a.a.createElement("div",null,a.a.createElement("p",{className:"person"},e.name," ",e.number," ",a.a.createElement("button",{className:"delete-btn",onClick:e.onClick,value:e.id},"delete")))},v=function(e){return a.a.createElement("div",null,(n=e.allPersons,t=e.onClick,n.map(function(e){return a.a.createElement(p,{key:e.id,id:e.id,name:e.name,number:e.number,onClick:t})})));var n,t},b=function(e){return a.a.createElement("div",null,a.a.createElement("p",null,"filter shown with: ",a.a.createElement("input",{value:e.value,onChange:e.onChange,onKeyUp:e.onKeyUp})))},h=function(e){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e.onSubmit},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:e.valueName,onChange:e.onChangeName})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:e.valueNumber,onChange:e.onChangeNumber})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},E=function(e){var n=e.type,t=e.message;return null===t?null:"error"===n?a.a.createElement("div",{className:"error"},t):a.a.createElement("div",{className:"success"},t)},y=function(){return a.a.createElement("div",{style:{color:"white",fontStyle:"italic",fontSize:16,background:"teal",height:100,textAlign:"center",marginTop:50}},a.a.createElement("br",null),a.a.createElement("em",null,"Phonebook app by ",a.a.createElement("strong",null,"Code for My Life")))},k=function(){return a.a.createElement("div",{style:{color:"white",fontStyle:"italic",fontSize:16,background:"teal",height:50,paddingLeft:10,paddingBottom:30,textAlign:"center"}},a.a.createElement("br",null),a.a.createElement("p",null,"Phonebook App by ",a.a.createElement("strong",null,"Code for My Life")," - built with MERN stack"))},w=[],C=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],l=n[1],r=Object(o.useState)(""),u=Object(c.a)(r,2),i=u[0],s=u[1],p=Object(o.useState)(""),C=Object(c.a)(p,2),N=C[0],O=C[1],j=Object(o.useState)(""),S=Object(c.a)(j,2),A=S[0],P=S[1],L=Object(o.useState)(null),R=Object(c.a)(L,2),U=R[0],x=R[1],B=Object(o.useState)(""),I=Object(c.a)(B,2),K=I[0],M=I[1];Object(o.useEffect)(function(){console.log("effect"),m().then(function(e){l(e),w=e,console.log("initial",t)})},[]);var z=function(e,n){return e.filter(function(e){return!0===e.name.toLowerCase().startsWith(n.toLowerCase())})},D=function(e,n,o){if(M(e),x(n),setTimeout(function(){x(null)},4e3),"error"===e&&null!=o){var a=t.filter(function(e){return e.id!==o});l(a),w=a}};return a.a.createElement("div",null,a.a.createElement(k,null),a.a.createElement("div",{className:"container"},a.a.createElement("h2",null,"Phonebook"),a.a.createElement(E,{type:K,message:U}),a.a.createElement(b,{value:A,onChange:function(e){if(P(e.target.value),console.log(e.target.value),""===e.target.value)console.log("effect"),m().then(function(e){l(e),console.log("show persons",e)});else{var n=z(w,e.target.value);console.log("debug filtered",n),l(n)}},onKeyUp:function(e){if(console.log("press button",e.key),"Backspace"===e.key){var n=z(w,e.target.value);console.log("debug onkeyup",n),l(n)}}}),a.a.createElement("h3",null,"Add a new or update existing one"),a.a.createElement(h,{onSubmit:function(e){e.preventDefault(),console.log("add person, isinarray content: ",t.filter(function(e){return e.name===i}));var n=t.filter(function(e){return e.name===i});console.log("isInArray",n.length),console.log("isInArray:::",n);var o={name:i,number:N};if(0===n.length)console.log("button clicked",e.target),d(o).then(function(e){l(t.concat(e)),s(""),O(""),w.push(e),console.log("debug phonebooktmp",w),D("success","Added ".concat(o.name," to the phonebook"),null)}).catch(function(e){console.log(e.response.data),D("error","Adding ".concat(o.name," caused an error: '").concat(e.response.data.error,"'"),null)});else if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var a=n[0].id;console.log("id",a),f(a,o).then(function(e){l(t.map(function(n){return n.id!==a?n:e.data})),D("success","Updated ".concat(o.name," to the phonebook"),null),s(""),O("")}).catch(function(e){D("error","Updating of ".concat(o.name," caused an error: '").concat(e.message,"'"),null),s(""),O("")})}else s(""),O("")},valueName:i,onChangeName:function(e){console.log(e.target.value),s(e.target.value)},valueNumber:N,onChangeNumber:function(e){console.log(e.target.value),O(e.target.value)}}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(v,{allPersons:t,onClick:function(e){console.log("in removePersons-event",e.target.value);var n=e.target.value;console.log("remove person frontend",n);var o=t.find(function(e){return e.id===n});console.log("remove id",n,"removed: ",o.name),window.confirm("Do you really want to delete '".concat(o.name,"'?"))?g(n).then(function(e){console.log("returnedPersons",e);var a=t.filter(function(e){return e.id!==n});console.log("newPersonsArray",a),l(a),w=a,console.log("phonebook tmp",w),console.log("persons",t),D("success","Removed ".concat(o.name," from the phonebook"),null)}).catch(function(e){D("error","the person '".concat(o.name,"' cannot be deleted from the server! ERROR:: ").concat(e),null)}):console.log("you cancelled deletion")}})),a.a.createElement(y,null))};r.a.render(a.a.createElement(C,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b73a7499.chunk.js.map